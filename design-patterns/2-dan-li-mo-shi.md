作业大纲

```
1、熟练掌握单例模式的常见写法。
2、思考破坏单例模式的方式有哪些？并且归纳总结。
3、梳理内部类的执行逻辑，并画出时序图。
```

## 1 常见的单例模式及其优缺点:

```
(1) 饿汉式单例, 
    优点: 每次都会 new  对象, 不会存在多线程的问题, 线程出现以前就已经初始化了;
    缺点: 系统启动时, 占用资源, 会造成资源浪费;
(2) 懒汉式单例, 简单版本 --> 会存在 线程不安全的情况;
                --> 加锁, 可能会出现将整个类锁死的情况;
                --> 双重锁, --> 就比较好了;
                --> 静态内部类;
(3) 注册式单例:
    1) 枚举式 单例;
    2) 容器式单例 + synchronized;
(4) ThreadLocal 是伪线程单例的, 线程间不是单例, 线程内是单例的;
    --> 使用场景: 可以做动态数据源切换;
```

---



